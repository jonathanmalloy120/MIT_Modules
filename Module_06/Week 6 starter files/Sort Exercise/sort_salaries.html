<!DOCTYPE html>
<html>
<script src="https://www.google.com/jsapi"></script>
<script src="chart.js"></script>
<script src="salaries.js"></script>

<div id="chart_div" style="width: 1280px; height: 1280px;"></div>

<script>
const salaries = chicago.data;

const generatePoints = function(){

	const points  = [];
	salaries.forEach(function(item){
		points.push({
			job    : item[9],
			salary : Number(item[11])
		});					
	});

	// order by salary
	 points.sort(compare);

	return points;
};

function compare(a, b) {
	if (a.salary < b.salary) { //access with dot notation because the points are objects not arrays. a[1] >b[1] doesn't work
		return -1;
	} else if (a.salary > b.salary) {
		return 1;
	} else {
		return 0;
	}
}


window.onload = function run(){
	const points = generatePoints();
	const dataset = generateDataset(points);	
	drawChart(dataset);
};

</script>

</html>